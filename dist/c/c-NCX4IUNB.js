import{a as gt,b as vn}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-UK7MENH6.js";import{b as Tt,k as In}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-CWQHAJ6V.js";import{c as ht,d as Pt,e as bt,f as ft,h as St,j as xt,o as yt,p as Un}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-4UWIDEZR.js";import{a as mt,b as An}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-C6IZKA6N.js";import{c as ye,d as ut}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-UCG3AKNF.js";import{a as ct,b as On}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-OZ532VLC.js";import{d as te,g as V,l as Fe,m as I,n as Se}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-ADTYP7RM.js";import{g as pt,l as Wn}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-CASEFXL4.js";import{D as Cn,j as dt}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-H6QZSWF6.js";import{b as ze,e as Mn}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-JMWX7Z2O.js";import{C as xe,D as r,E as u,F as q}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-E5FEB57G.js";import{a as Ve}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-VB6TFWKV.js";import{a as C,b as oe}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-5NZYHTT2.js";import{b as pe,c as kn}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-BMPTOLAX.js";import{c as wn}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-LXGFOBLO.js";import{b as lt}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-2YXWJ5TM.js";import{a as B,d as de,f as fe}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-CDDSJHLM.js";var je=B(()=>{"use strict"});var ne=B(()=>{"use strict"});function p({children:e}){return r(ze,{textStyle:"small",children:e})}function g({children:e}){return r(ze,{textStyle:"small",fontStyle:"italic",children:e})}var $e=B(()=>{"use strict";Mn();q()});var z,v,Ct,wt=B(()=>{"use strict";$e();ne();q();z={TextWidget:u(p,{children:["Click on the ",r(g,{children:"plus"})," in the lower-left panel and choose a Text widget"]}),TextWidgetOpenPanel:"Select the text widget to get back on track",PictureWidgetSelect:u(p,{children:["Click on the ",r(g,{children:"plus"})," in the lower-left panel and add a Picture widget"]}),PictureWidgetUse:"Select the picture widget again",ButtonWidgetSelect:u(p,{children:["Click on the plus and choose a ",r(g,{children:"Button"})," widget"]}),ButtonWidgetAdjustVisualProperties:"Select the button widget you added earlier",ButtonWidgetAddLink:"Select the button widget you added earlier",CreateLayout:u(p,{children:["\u0421lick the ",r(g,{children:"Devices"})," icon to add a mobile layout"]}),CreateLayoutSelect:u(p,{children:["\u0421lick the ",r(g,{children:"Devices"})," icon to add a mobile layout"]})},v={TextWidget:u(p,{children:["First, let\u2019s learn how to work with text blocks. Click here to add a ",r(g,{children:"Text"})," widget"]}),TextWidgetOpenPanel:u(p,{children:["Now open the ",r(g,{children:"Typography"})," panel"]}),TextWidgetProperties:"Change the font size to 13 and click on the empty area",TextWidgetSelect:r(p,{children:"Let\u2019s say you want to finish text editing\u2014just click on any empty area"}),TextWidgetDrag:r(p,{children:"Now move the text to any place or to its placeholder (a place reserved for a particular element)"}),PictureWidget:u(p,{children:["You\u2019re off to a good start! Now click on the ",r(g,{children:"plus"})," to start adding a picture"]}),PictureWidgetSelect:u(p,{children:["Choose the ",r(g,{children:"Picture"})," widget"]}),PictureWidgetUse:"Click on the Unsplash icon and pick a picture of a building",PictureWidgetChoose:"Pick a picture building",PictureWidgetClickOutside:"Now let\u2019s align this widget to the grid. Click on the empty area",SelectGrids:u(p,{children:["Then select ",r(g,{children:"Grid & Guides"})]}),ChangeGrids:u(p,{children:["The 3 dots on the right top of the settings correspond to 3 grid presets",r("br",{}),"Click on the last dot"]}),PictureWidgetPlace:"Move the picture to its placeholder and align it to the grid",EverythingInItsRightPlace:"Check that all the added widgets are aligned to the grid and click on empty area",TurnOffGuides:u(p,{children:["Disable the guides by pressing the ",r(g,{children:"H"})," key"]}),PageHeight:u(p,{children:["Now we\u2019ll decrease the page height.",r("br",{}),"Scroll down and drag the ",r(g,{children:"Blue Diamond"})," up"]}),DeleteBlocks:u(p,{children:["Go to the ",r(g,{children:"Layers"})," panel by pressing ",r(g,{children:"Q"})," and delete no longer needed widget groups of placeholders"]}),ButtonWidget:u(p,{children:["Well done, now let\u2019s add a button. Click on the ",r(g,{children:"plus"})," first"]}),ButtonWidgetSelect:u(p,{children:["Choose a ",r(g,{children:"Button"})," widget"]}),ButtonWidgetAdjustVisualProperties:"Change the button color to black and click on the empty area",ButtonWidgetAddLink:u(p,{children:["Choose an ",r(g,{children:"Anchor"})," type link from the dropdown",r("br",{}),"and add it to the button"]}),ButtonWidgetAddLinkType:u(p,{children:["Add ",r(g,{children:"Anchor"})," link to the button"]}),ButtonWidgetAnchorLinkPosition:"Set the place were the anchor link will lead\u2014above the pictures",ButtonWidgetDrag:"Now drag the button to its placeholder",CreateLayout:u(p,{children:["Now let\u2019s see how your design looks in the mobile version",r("br",{}),"Click on the ",r(g,{children:"Devices"})," icon"]}),CreateLayoutSelect:u(p,{children:["Click on the ",r(g,{children:"plus"})," at the top of the Devices panel"]}),AdjustSizes:"It\u2019s time to add the finishing touch. Swap the picture with the text widget",ArrangeMobile:u(p,{children:["Click ",r(g,{children:"Single column"})," to arrange a mobile version"]}),PreviewAndPublish:u(p,{children:["Last step! Click on the ",r(g,{children:"Eye"})," icon to preview your project before publishing"]}),BackToConstructor:u(p,{children:["Hit ",r(g,{children:"Publish"})," or click the pencil icon to go back to the editor"]})},Ct={TextWidget:{name:"TextWidget",text({isPresetPanel:e}={}){return e?u(p,{children:["Open ",r(g,{children:"Widgets"})]}):v.TextWidget},num:1,nextStep:"TextWidgetOpenPanel",widgetSelectionType:"text",fallbackText:z.TextWidget},TextWidgetOpenPanel:{name:"TextWidgetOpenPanel",text:v.TextWidgetOpenPanel,num:2,prevStep:"TextWidget",nextStep:"TextWidgetProperties",fallbackText:z.TextWidgetOpenPanel},TextWidgetProperties:{name:"TextWidgetProperties",text:v.TextWidgetProperties,num:3,prevStep:"TextWidgetOpenPanel",nextStep:"TextWidgetSelect",fallbackText:z.TextWidgetOpenPanel},TextWidgetSelect:{name:"TextWidgetSelect",text:v.TextWidgetSelect,num:4,prevStep:"TextWidgetProperties",nextStep:"TextWidgetDrag"},TextWidgetDrag:{name:"TextWidgetDrag",text:v.TextWidgetDrag,num:5,prevStep:"TextWidgetSelect",nextStep:"ButtonWidget"},ButtonWidget:{name:"ButtonWidget",text:v.ButtonWidget,num:6,prevStep:"TextWidgetDrag",nextStep:"ButtonWidgetSelect"},ButtonWidgetSelect:{name:"ButtonWidgetSelect",text:v.ButtonWidgetSelect,num:7,prevStep:"ButtonWidget",nextStep:"ButtonWidgetDrag",widgetSelectionType:"button",fallbackText:z.ButtonWidgetSelect},ButtonWidgetDrag:{name:"ButtonWidgetDrag",text:v.ButtonWidgetDrag,num:8,prevStep:"ButtonWidgetSelect",nextStep:"ButtonWidgetAdjustVisualProperties"},ButtonWidgetAdjustVisualProperties:{name:"ButtonWidgetAdjustVisualProperties",text:v.ButtonWidgetAdjustVisualProperties,num:9,prevStep:"ButtonWidgetDrag",nextStep:"ButtonWidgetAddLink",fallbackText:z.ButtonWidgetAdjustVisualProperties},ButtonWidgetAddLink:{name:"ButtonWidgetAddLink",text:v.ButtonWidgetAddLink,num:10,prevStep:"ButtonWidgetAdjustVisualProperties",nextStep:"ButtonWidgetAddLinkType",fallbackText:z.ButtonWidgetAddLink},ButtonWidgetAddLinkType:{name:"ButtonWidgetAddLinkType",text:v.ButtonWidgetAddLinkType,num:11,prevStep:"ButtonWidgetAddLink",nextStep:"ButtonWidgetAnchorLinkPosition",fallbackText:z.ButtonWidgetAddLink},ButtonWidgetAnchorLinkPosition:{name:"ButtonWidgetAnchorLinkPosition",text:v.ButtonWidgetAnchorLinkPosition,num:12,prevStep:"ButtonWidgetAddLink",nextStep:"PictureWidget"},PictureWidget:{name:"PictureWidget",text:v.PictureWidget,num:13,prevStep:"ButtonWidgetAddLink",nextStep:"PictureWidgetSelect",widgetSelectionType:"picture"},PictureWidgetSelect:{name:"PictureWidgetSelect",text:v.PictureWidgetSelect,num:14,prevStep:"PictureWidget",nextStep:"PictureWidgetUse",widgetSelectionType:"picture",fallbackText:z.PictureWidgetSelect},PictureWidgetUse:{name:"PictureWidgetUse",text:v.PictureWidgetUse,num:15,prevStep:"PictureWidgetSelect",nextStep:"PictureWidgetChoose",fallbackText:z.PictureWidgetUse},PictureWidgetChoose:{name:"PictureWidgetChoose",text:v.PictureWidgetChoose,num:16,prevStep:"PictureWidgetUse",nextStep:"PictureWidgetClickOutside"},PictureWidgetClickOutside:{name:"PictureWidgetClickOutside",text:v.PictureWidgetClickOutside,num:17,prevStep:"PictureWidgetUse",nextStep:"SelectGrids",fallbackStep:"SelectGrids"},SelectGrids:{name:"SelectGrids",text:v.SelectGrids,num:18,prevStep:"PictureWidgetClickOutside",nextStep:"ChangeGrids"},ChangeGrids:{name:"ChangeGrids",text:v.ChangeGrids,num:19,prevStep:"SelectGrids",nextStep:"PictureWidgetPlace"},PictureWidgetPlace:{name:"PictureWidgetPlace",text:v.PictureWidgetPlace,num:20,prevStep:"ChangeGrids",nextStep:"EverythingInItsRightPlace"},EverythingInItsRightPlace:{name:"EverythingInItsRightPlace",text:v.EverythingInItsRightPlace,num:21,prevStep:"PictureWidgetPlace",nextStep:"TurnOffGuides"},TurnOffGuides:{name:"TurnOffGuides",text:v.TurnOffGuides,num:22,prevStep:"EverythingInItsRightPlace",nextStep:"PageHeight"},PageHeight:{name:"PageHeight",text:v.PageHeight,num:23,prevStep:"TurnOffGuides",nextStep:"CreateLayout"},CreateLayout:{name:"CreateLayout",text:v.CreateLayout,num:24,prevStep:"PageHeight",nextStep:"CreateLayoutSelect",fallbackText:z.CreateLayout},CreateLayoutSelect:{name:"CreateLayoutSelect",text:v.CreateLayoutSelect,num:25,prevStep:"CreateLayout",nextStep:"ArrangeMobile",fallbackText:z.CreateLayoutSelect},ArrangeMobile:{name:"ArrangeMobile",text:v.ArrangeMobile,num:26,prevStep:"CreateLayoutSelect",nextStep:"PreviewAndPublish"},PreviewAndPublish:{name:"PreviewAndPublish",text:v.PreviewAndPublish,num:27,prevStep:"ArrangeMobile",nextStep:"BackToConstructor"},BackToConstructor:{name:"BackToConstructor",text:v.BackToConstructor,num:28,prevStep:"PreviewAndPublish"}}});var D,w,kt,Wt=B(()=>{"use strict";$e();ne();q();D={OpenBackgroundLayer:u(p,{children:["Open ",r(g,{children:"Background"})," layer"]}),MobileMenuVisible:u(p,{children:["Click on your Mobile menu in ",r(g,{children:"Layers"})]}),BeforeAddAnimations:u(p,{children:["Click on your Mobile menu in ",r(g,{children:"Layers"})]}),ClickOnPaletteIcon:u(p,{children:["\u0421hoose gray color for ",r(g,{children:"Background"})," in ",r(g,{children:"Layers"})]}),ChangeGrids:u(p,{children:["Open ",r(g,{children:"Grid"})," and ",r(g,{children:"Layout"})]}),ClickOnSnapButton:u(p,{children:["Open ",r(g,{children:"Grid"})," and ",r(g,{children:"Layout"})]}),ClickOnSizesButton:u(p,{children:["Open ",r(g,{children:"Grid"})," and ",r(g,{children:"Layout"})]}),SwitchToMobileLayout:u(p,{children:["Switch to the Mobile layout in ",r(g,{children:"Devices"})]}),AddAnimations:r(p,{children:"Click on your Mobile menu again"}),AddTapAnimations:u(p,{children:["Select ",r(g,{children:"Background"})," and ",r(g,{children:"Menu"})," layers and open"," ",r(g,{children:"Animation"})," tab"]}),AddTapMoveAnimations:u(p,{children:["Select ",r(g,{children:"Background"})," and ",r(g,{children:"Menu"})," layers and open"," ",r(g,{children:"Animation"})," tab"]}),SetAnimationValue:u(p,{children:["Select ",r(g,{children:"Background"})," and ",r(g,{children:"Menu"})," layers and open"," ",r(g,{children:"Animation"})," tab"]}),SetAnimationTrigger:u(p,{children:["Select ",r(g,{children:"Background"})," and ",r(g,{children:"Menu"})," layers and open"," ",r(g,{children:"Animation"})," tab"]}),PositionControlClick:r(p,{children:"Click on your Mobile menu again"}),PositionTopRight:u(p,{children:["Open ",r(g,{children:"Position"})," tab"]}),PositionTogglesOn:u(p,{children:["Open ",r(g,{children:"Position"})," tab"]}),SwitchToDesktop:u(p,{children:["Open ",r(g,{children:"Viewer settings"})]}),UseCustomCursor:u(p,{children:["Open ",r(g,{children:"Viewer settings"})]}),PointerCursorUpload:u(p,{children:["Open ",r(g,{children:"Viewer settings"})]})},w={OpenLayersPanel:u(p,{children:["Let's tweak this website a bit. Open ",r(g,{children:"Layers"})," panel ",r("br",{}),"to change the background color"]}),OpenBackgroundLayer:u(p,{children:["Open ",r(g,{children:"Background"})," layer"]}),ClickOnPaletteIcon:r(p,{children:"Choose gray color"}),SelectGrids:u(p,{children:["Now let's align widgets\u2014building blocks your layout ",r("br",{}),"consists of\u2014to the grid. Open ",r(g,{children:"Grid & Guides"})]}),ChangeGrids:u(p,{children:["The 3 dots on the right top of the settings correspond to 3 grid presets",r("br",{}),"Click on the last dot"]}),ClickOnSnapButton:u(p,{children:["Click on ",r(g,{children:"Snap"})," and all widgets will stick to the edges of columns and rows"]}),ClickOnSizesButton:u(p,{children:["Now click on ",r(g,{children:"Sizes"})," to see widgets' exact dimensions"]}),ArrangeWidgetsInTheGrid:r(p,{children:"Arrange widgets in the grid"}),DisableGrid:u(p,{children:["Disable ",r(g,{children:"Guides"})," by pressing H key"]}),OpenMobileLayout:r(p,{children:"Take a look at the Mobile layout"}),SwitchToMobileLayout:r(p,{children:"Switch to the Mobile layout"}),FindVisibleMobileMenu:u(p,{children:["Open ",r(g,{children:"Layers"}),"\u2014we\u2019re going to replace the navigation bar with a burger menu"]}),DeleteVisibleMobileMenu:u(p,{children:["Hover over this group and click on ",r(g,{children:"Eye"})," icon to hide the menu for mobile.",r("br",{}),"It will stay at the desktop, as Readymag\u2019s desktop-first tool"]}),MobileMenuVisible:u(p,{children:["Make it visible by clicking on the layer and pressing ",r(g,{children:"Eye"})," icon"]}),ClickOnTriangleToOpenGroup:u(p,{children:["Click the triangle to the left of this group\u2019s name\u2014",r(g,{children:"Group"}),"\u2014and you\u2019ll open ",r("br",{}),"the mobile menu group. We\u2019re going to animate the menu"]}),BeforeAddAnimations:u(p,{children:["Select ",r(g,{children:"Background"})," and ",r(g,{children:"Menu"})," layers by holding down Shift"]}),AddAnimations:u(p,{children:["Open ",r(g,{children:"Animation"})," settings"]}),AddTapAnimations:u(p,{children:["Choose ",r(g,{children:"Tap"})," animation"]}),AddTapMoveAnimations:u(p,{children:["Add ",r(g,{children:"Move"})," animation to these layers"]}),SetAnimationValue:u(p,{children:["Set the left value to -328. It will let the background ",r("br",{}),"paired with the menu occupy the entire screen"]}),SetAnimationTrigger:u(p,{children:["To set your burger menu as an animation trigger, click ",r(g,{children:"plus"})," first"]}),ClickOnBurgerMenuIcon:r(p,{children:"Then click your burger menu icon\u2014three horizontal lines rightward to the logo"}),FixMenuClickOutside:u(p,{children:["Let's fix the menu so that it stays in place when the page's scrolled. ",r("br",{}),"Click on empty area and then select your mobile menu again."]}),PositionControlClick:u(p,{children:["Click on ",r(g,{children:"Position"})," control"]}),PositionTopRight:r(p,{children:"Choose the top right corner circle to fix the widget to this part of the screen"}),PositionTogglesOn:u(p,{children:["Enable ",r(g,{children:"On All Pages"})," and ",r(g,{children:"Above Pages"})," for the widget group so that it stays ",r("br",{}),"accessible on every page and above the rest of the elements"]}),CheckPreview:r(p,{children:"Check the preview"}),ViewerSettings:u(p,{children:["Let's go to ",r(g,{children:"Viewer settings"})," and take a look at the desktop layout. Your menu is intact here"]}),SwitchToDesktop:r(p,{children:"Switch to Desktop"}),UseCustomCursor:u(p,{children:["Let\u2019s add a custom cursor. Enable ",r(g,{children:"Use custom cursor"})," toggle"]}),PointerCursorUpload:u(p,{children:["You can upload your default and pointer cursors here. ",r("br",{}),"Click on empty space to finish working on the project"]}),GoBackToEditor:u(p,{children:["Let's return to the Editing mode where ",r("br",{}),"you'll continue mastering Readymag"]})},kt={OpenLayersPanel:{name:"OpenLayersPanel",text:w.OpenLayersPanel,num:1,nextStep:"OpenBackgroundLayer"},OpenBackgroundLayer:{name:"OpenBackgroundLayer",text:w.OpenBackgroundLayer,num:2,prevStep:"OpenLayersPanel",nextStep:"ClickOnPaletteIcon",fallbackText:D.OpenBackgroundLayer},ClickOnPaletteIcon:{name:"ClickOnPaletteIcon",text:w.ClickOnPaletteIcon,num:3,prevStep:"OpenBackgroundLayer",nextStep:"SelectGrids",fallbackText:D.ClickOnPaletteIcon},SelectGrids:{name:"SelectGrids",text:w.SelectGrids,num:4,prevStep:"ClickOnPaletteIcon",nextStep:"ChangeGrids"},ChangeGrids:{name:"ChangeGrids",text:w.ChangeGrids,num:5,prevStep:"SelectGrids",nextStep:"ClickOnSnapButton",fallbackText:D.ChangeGrids},ClickOnSnapButton:{name:"ClickOnSnapButton",text:w.ClickOnSnapButton,num:6,prevStep:"SelectGrids",nextStep:"ClickOnSizesButton",fallbackText:D.ClickOnSnapButton},ClickOnSizesButton:{name:"ClickOnSizesButton",text:w.ClickOnSizesButton,num:7,prevStep:"ClickOnSnapButton",nextStep:"ArrangeWidgetsInTheGrid",fallbackText:D.ClickOnSizesButton},ArrangeWidgetsInTheGrid:{name:"ArrangeWidgetsInTheGrid",text:w.ArrangeWidgetsInTheGrid,num:8,prevStep:"ClickOnSizesButton",nextStep:"DisableGrid"},DisableGrid:{name:"DisableGrid",text:w.DisableGrid,num:9,prevStep:"ArrangeWidgetsInTheGrid",nextStep:"OpenMobileLayout"},OpenMobileLayout:{name:"OpenMobileLayout",text:w.OpenMobileLayout,num:10,prevStep:"DisableGrid",nextStep:"SwitchToMobileLayout"},SwitchToMobileLayout:{name:"SwitchToMobileLayout",text:w.SwitchToMobileLayout,num:11,prevStep:"OpenMobileLayout",nextStep:"FindVisibleMobileMenu",fallbackText:D.SwitchToMobileLayout},FindVisibleMobileMenu:{name:"FindVisibleMobileMenu",text:w.FindVisibleMobileMenu,num:12,prevStep:"SwitchToMobileLayout",nextStep:"DeleteVisibleMobileMenu"},DeleteVisibleMobileMenu:{name:"DeleteVisibleMobileMenu",text:w.DeleteVisibleMobileMenu,num:13,prevStep:"FindVisibleMobileMenu",nextStep:"MobileMenuVisible"},MobileMenuVisible:{name:"MobileMenuVisible",text:w.MobileMenuVisible,num:14,prevStep:"DeleteVisibleMobileMenu",nextStep:"ClickOnTriangleToOpenGroup",fallbackText:D.MobileMenuVisible},ClickOnTriangleToOpenGroup:{name:"ClickOnTriangleToOpenGroup",text:w.ClickOnTriangleToOpenGroup,num:15,prevStep:"MobileMenuVisible",nextStep:"BeforeAddAnimations"},BeforeAddAnimations:{name:"BeforeAddAnimations",text:w.BeforeAddAnimations,num:16,prevStep:"MobileMenuVisible",nextStep:"AddAnimations",fallbackText:D.BeforeAddAnimations},AddAnimations:{name:"AddAnimations",text:w.AddAnimations,num:17,prevStep:"BeforeAddAnimations",nextStep:"AddTapAnimations",fallbackText:D.AddAnimations},AddTapAnimations:{name:"AddTapAnimations",text:w.AddTapAnimations,num:18,prevStep:"AddAnimations",nextStep:"AddTapMoveAnimations",fallbackText:D.AddTapAnimations},AddTapMoveAnimations:{name:"AddTapMoveAnimations",text:w.AddTapMoveAnimations,num:19,prevStep:"AddTapAnimations",nextStep:"SetAnimationValue",fallbackText:D.AddTapMoveAnimations},SetAnimationValue:{name:"SetAnimationValue",text:w.SetAnimationValue,num:20,prevStep:"AddTapAnimations",nextStep:"SetAnimationTrigger",fallbackText:D.SetAnimationValue},SetAnimationTrigger:{name:"SetAnimationTrigger",text:w.SetAnimationTrigger,num:21,prevStep:"SetAnimationValue",nextStep:"ClickOnBurgerMenuIcon",fallbackText:D.SetAnimationTrigger},ClickOnBurgerMenuIcon:{name:"ClickOnBurgerMenuIcon",text:w.ClickOnBurgerMenuIcon,num:22,prevStep:"SetAnimationTrigger",nextStep:"FixMenuClickOutside"},FixMenuClickOutside:{name:"FixMenuClickOutside",text:w.FixMenuClickOutside,num:23,prevStep:"SetAnimationTrigger",nextStep:"PositionControlClick"},PositionControlClick:{name:"PositionControlClick",text:w.PositionControlClick,num:24,prevStep:"FixMenuClickOutside",nextStep:"PositionTopRight",fallbackText:D.PositionControlClick},PositionTopRight:{name:"PositionTopRight",text:w.PositionTopRight,num:25,prevStep:"PositionControlClick",nextStep:"PositionTogglesOn",fallbackText:D.PositionTopRight},PositionTogglesOn:{name:"PositionTogglesOn",text:w.PositionTogglesOn,num:26,prevStep:"PositionTopRight",nextStep:"CheckPreview",fallbackText:D.PositionTogglesOn},CheckPreview:{name:"CheckPreview",text:w.CheckPreview,num:27,prevStep:"PositionTogglesOn",nextStep:"ViewerSettings"},ViewerSettings:{name:"ViewerSettings",text:w.ViewerSettings,num:28,prevStep:"CheckPreview",nextStep:"SwitchToDesktop"},SwitchToDesktop:{name:"SwitchToDesktop",text:w.SwitchToDesktop,num:29,prevStep:"ViewerSettings",nextStep:"UseCustomCursor",fallbackText:D.SwitchToDesktop},UseCustomCursor:{name:"UseCustomCursor",text:w.UseCustomCursor,num:30,prevStep:"SwitchToDesktop",nextStep:"PointerCursorUpload",fallbackText:D.UseCustomCursor},PointerCursorUpload:{name:"PointerCursorUpload",text:w.PointerCursorUpload,num:31,prevStep:"UseCustomCursor",nextStep:"GoBackToEditor",fallbackText:D.PointerCursorUpload},GoBackToEditor:{name:"GoBackToEditor",text:w.GoBackToEditor,num:32,prevStep:"PointerCursorUpload"}}});var Mt,vt=B(()=>{"use strict";ne();Mt={GettingStartedVideo:{name:"GettingStartedVideo",text:"Getting started",num:1,nextStep:"HelpButton"},HelpButton:{name:"HelpButton",text:"Click here for more learning content",num:2}}});var we,Ot=B(()=>{"use strict";ne();wt();Wt();vt();we={default:Ct,pro:kt,templates:Mt}});var At,It=B(()=>{"use strict";oe();At=()=>{C.post("/api/mailchimp/help-tour-not-finished")}});var ke,En,Bn,Ut=B(()=>{"use strict";ke=(e,t,i,l)=>{let m=i.findIndex(M=>M.num===e),T=m>=0?i[m]:null,c=e+1,b=null;if(T&&T.children&&T.children.length)if(l[T._id]&&l[T._id].collapsed)b=T._id;else{let M=i[m+1];M?c=M.num:c=T.children[T.children.length-1].num+1}if(!T){let M=t.find(O=>O.num===e);M&&(b=M.parentPage)}return{newPageNum:c,newPageParentId:b}},En=(e,t=void 0)=>e.map(i=>i.children?{id:i._id,parentId:t,items:En(i.children,i._id)}:{id:i._id,parentId:t}),Bn=e=>e.reduce((t,i)=>(t.push(i),i.items?t.concat(Bn(i.items)):t),[])});var N,Et=B(()=>{"use strict";N=class{constructor({message:t,tag:i,type:l}){fe(this,"message");fe(this,"type");fe(this,"tag");this.message=t,this.tag=i,this.type=l||"error"}}});var Bt,_t,Ni,Lt,Dt=B(()=>{"use strict";oe();Bt=e=>C.get(`/api/user/${e}/links`),_t=e=>C.get(`/api/user/${e}/projects-domains`),Ni=(e,t)=>C.post("/api/checkdomain",{type:e,domain:t}),Lt=e=>C.post("/api/user/creator-profile",e)});var Fi,zi,Rt,ji,Gt,Nt,Ht,Vt,Ft,zt=B(()=>{"use strict";oe();Fi=()=>C.get("/api/user_templates/"),zi=async e=>{let{data:t}=await C.get(`/api/help-tour-template/${e}`);return t||{}},Rt=e=>C.delete("/api/template/",{id:e}),ji=(e,t)=>C.put("/api/template/",{id:e,name:t}),Gt=e=>C.post("/api/submit-to-templates",e),Nt=({num_id:e})=>C.post(`/api/unsubmit-to-templates/${e}`),Ht=({num_id:e})=>C.post(`/api/resubmit-to-templates/${e}`),Vt=e=>C.get(`/api/template/stats/${e}`),Ft=e=>C.get(`/api/submit-to-templates/${e}`)});async function Yi(e){return await C.get(`/api/domain-reseller/${e}`)}var jt,$t,qt,Ji,Jt=B(()=>{"use strict";oe();jt=({numId:e,domainName:t,domainSource:i})=>C.post("/api/checkdomain",{num_id:e,domain:t,source:i}),$t=(e,t)=>C.post(`/api/mag/domain/${e}`,{domain:t,status:"on"}),qt=e=>C.post(`/api/mag/domain/${e}`,{status:"off"}),Ji=e=>C.post("/api/domain/visit",{domain:e})});var Ki,Zi,er,tr,Yt,Xt,Qt=B(()=>{"use strict";oe();Ki=async({email:e,projectNumIds:t,folderIds:i,sharesAll:l,role:m,folderRoles:T,projectRoles:c})=>{let b=await C.post("/api/team",{email:e,mags:t,folders:i,sharesAll:l,role:m,folderRoles:T,projectRoles:c});if(!b.teamMember)throw b.error||b;return b.teamMember},Zi=async({email:e,projectNumIds:t,folderIds:i,sharesAll:l,role:m,folderRoles:T,projectRoles:c})=>{let b=await C.put("/api/team",{email:e,mags:t,folders:i,sharesAll:l,role:m,folderRoles:T,projectRoles:c});if(!b.teamMember)throw b.error||b;return b.teamMember},er=e=>C.delete("/api/team",{id:e}),tr=e=>C.post("/api/team/invite",{email:e}),Yt=()=>C.get("/api/team"),Xt=(e,t={isPending:!1})=>{let i=new URLSearchParams(t);return C.get(`/api/project/${e}/team${i.toString()?"?"+i:""}`)}});function nr(e){try{let t=new URL(e.includes("://")?e:`https://${e}`);return/^(?:[a-zA-Z0-9-]+\.)+[a-zA-Z]{2,}$/.test(t.hostname)?t.toString():!1}catch{return!1}}function ir(e){try{let t=new URL(e.includes("://")?e:`https://${e}`),i=t.hostname.toLowerCase(),l=t.pathname;return i==="gumroad.com"&&/^\/l\/[^/]+/.test(l)||i==="gum.co"&&/^\/[^/]+/.test(l)||i.endsWith(".gumroad.com")&&/^\/l\/[^/]+/.test(l)||i.endsWith(".lemonsqueezy.com")&&l.startsWith("/buy/")||i.endsWith(".myshopify.com")&&l.startsWith("/products/")?t.toString():!1}catch{return!1}}function Kt(e){try{let t=new URL(e.includes("://")?e:`https://${e}`),i=t.hostname.toLowerCase(),l=t.pathname;return i==="gumroad.com"&&/^\/l\/[^/]+/.test(l)||i==="gum.co"&&/^\/[^/]+/.test(l)||i.endsWith(".gumroad.com")&&/^\/l\/[^/]+/.test(l)?"Gumroad":i.endsWith(".lemonsqueezy.com")&&l.startsWith("/buy/")?"Lemonsqueezy":i.endsWith(".myshopify.com")&&l.startsWith("/products/")?"Shopify":void 0}catch{return}}function rr(e){let t=e.trim().toLowerCase();return/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(t)?t:!1}function sr(e){let t=e.trim().replace(",",".");if(!/^\d*(\.\d{0,2})?$/.test(t))return!1;let i=Number(t);return isNaN(i)||i<0?!1:Math.floor(i*100)/100}var Zt=B(()=>{"use strict"});function Dn({project:e,router:t,inPreview:i,children:l}){let m=(0,a.useCallback)(o=>{let n={...o.attributes};return delete n.children,n},[]),[T,c]=(0,a.useState)(()=>{let o=e.pages.models.map(s=>m(s));o.sort((s,d)=>s.num-d.num);let n=Me(o,null);return{project:e.attributes,owner:e.user.attributes,isOwner:!!t.isOwner,inPreview:!!i,pages:o,trashPages:[],pageRecentlyDeleted:!1,userTemplates:[],currentPageNum:t.getCurrentPageNum(),currentPageId:t.getCurrentPageId(),pagesTree:n,pagesParams:We(n,{}),codeInjectUpgradeAlertShown:!1,publishInProgress:!1,unpublishInProgress:!1,isPublishError:!1,selectedPages:[],lockedPages:{},collaborators:[],team:[],allProjects:[],teamworkProjects:[],ownedProjectTeam:[],projectTeam:[],me:t.me.attributes}}),{pages:b,pagesTree:M,pagesParams:O,project:{user:R,opts:y,num_id:P,domain:k},currentPageId:U,currentPageNum:A,publishInProgress:_,unpublishInProgress:E,isOwner:$,me:Q}=T,K=(0,a.useCallback)(o=>{let n=t.pageOrder.get("order"),s=null;if(o>n.length)s=n[n.length-1].id;else{let d=n.find(h=>h.num===o);d&&(s=d.id)}s?t.showWorkspace({id:s}):t.showWorkspace({num:1})},[t]),Z=(0,a.useCallback)((o,n)=>{let s=n.findIndex(d=>d._id===o.get("_id"));if(s>=0){let d=[...n];return d[s]&&(d[s]=m(o)),d}return n},[m]),re=(0,a.useRef)(void 0),ee=(0,a.useCallback)((o,n={})=>{re.current&&(re.current.hide(),re.current.remove()),re.current=new gt({$parent:document.querySelector("body > .popups"),router:t,opts:{type:"type-more-pages",is_contributor:!t.isOwner,owner_email:R?R.email:"",...n},alert_source:o}),re.current.render()},[R,t]),it=(0,a.useCallback)(()=>{c(o=>({...o,pageRecentlyDeleted:!1}))},[]),ve=(0,a.useRef)(void 0),rt=(0,a.useCallback)(()=>{c(o=>({...o,pageRecentlyDeleted:!0})),ve.current&&clearTimeout(ve.current),ve.current=setTimeout(()=>{it()},4500)},[it]),se=(0,a.useCallback)((o,n)=>e.set(o,n),[e]),Te=(0,a.useCallback)((o,n)=>e.unset(o,n),[e]),fo=(0,a.useCallback)((o,n)=>e.save(o,n),[e]),So=(0,a.useCallback)((o,n,s)=>{let d=e.pages.get(o);if(!d)throw new Error("Element not found");return d.set(n,s)},[e]),xo=(0,a.useCallback)((o,n,s)=>{let d=e.pages.get(o);if(!d)throw new Error("Element not found");return d.unset(n,s)},[e]),Oe=(0,a.useCallback)((o,n,s)=>{let d=e.pages.get(o);if(!d)throw new Error("Page not found");return d.save(n,{...s||{},patch:!0})},[e]),yo=(0,a.useCallback)(o=>{c(n=>({...n,currentPageNum:o}))},[]),st=(0,a.useCallback)(o=>{c(n=>({...n,inPreview:o}))},[]),Co=(0,a.useCallback)((o,n)=>{c(s=>({...s,pagesParams:{...s.pagesParams,[o]:{...s.pagesParams[o],collapsed:n}}}))},[]),ae=(0,a.useCallback)(async o=>{await e.pages.find(s=>s.attributes._id===o).updateScreenshots(e.get("num_id"))},[e]),wo=(0,a.useCallback)(async o=>{await e.pages.find(s=>s.attributes._id===o).updateBrokenScreenshot(e.get("num_id"))},[e]),ko=(0,a.useCallback)((o,n,s)=>new Promise((d,h)=>{let{newPageNum:f,newPageParentId:W}=ke(o,b,M,O),S=t.workspace.page.get("order")?.default,G={num:f};n&&(G={...G,...n}),e.addPage(G,F=>{if(F&&F.err)h(F);else{let H=F;if(n?window.RM.constructorRouter.trigger("notice:triggerMetrics","templateUsed"):H.isEmptyPage=!0,H.get("num")===2&&setTimeout(()=>{window.RM.constructorRouter.trigger("notice:triggerEduTip","eduTipUseNavigation",{standAlone:!0})},0),H.set("parentPage",W),t.pageOrder.reorderPagesAfterAdd({page:H,magId:e.get("_id")}),e.onAdd(H),n){H.from_template=!0;let at=H.hasGlobalWidgets();at||H?.updateScreenshots(e.get("num_id")),at&&(e.addGlobalWidgetsFromTemplate(H),e.pages.map(le=>le.attributes._id).filter(le=>le!==H.id).forEach(le=>ae(le)))}s||t.showWorkspace({id:H.id}),d(H)}},!0,S)}),[t,e,b,M,O,ae]),Wo=(0,a.useCallback)(o=>new Promise((n,s)=>{let d=e.getPage(o);if(!d)return s(new Error("Could not find page"));d.get("mid")||d.save({mid:e.get("_id")},{patch:!0,silent:!0});let{newPageNum:h,newPageParentId:f}=ke(d.get("num"),b,M,O);d.duplicate(W=>{if(W instanceof Error)return W.message==="Server error: permission_denied"&&(he()?t.trigger("notice:show","unpauseSubscriptionToCreatePage",{canBeClosed:!0}):ee("duplicate page",{type:"type-more-pages"})),s(W);let x=W;x.set("parentPage",f),t.pageOrder.reorderPagesAfterAdd({page:x,magId:e.get("_id")}),e.onAdd(x),t.gg.guides?.model&&(t.gg.guides.model.addPage(x.id,{silent:t.gg.guides.hidden}),t.gg.guides.model.save()),t.showWorkspace({id:x.id}),n(W)},{num:h})}),[t,e,b,M,O,ee]),Mo=(0,a.useCallback)(async()=>{let o=t._pageChanged;o&&typeof o=="string"&&(t._pageChanged=!1,await ae(o))},[t,ae]),vo=(0,a.useCallback)(o=>new Promise((n,s)=>{t.pageOrder.saveInProgress()||(t.pageOrder.save({order:o,mid:t.mag.id},{success:()=>{e.trigger("change:pids",e,e.get("pids")),n()},error:s}),e.trigger("change:pids",e,e.get("pids")))}),[t,e]),Oo=(0,a.useCallback)(o=>new Promise((n,s)=>{if(t.isPageLocked(o))return s(new Error("This page is locked"));if(e.get("pids").length===1)return s(new Error("Can't delete last page"));let d=O[o],h=[];if(d&&d.children.length){let x=d.children;d.collapsed?t.pageOrder.removeParentIds(x):h=[...x]}if(h.push(o),!e.checkDeletingPages(h))return s(new Error("Can't delete all pages"));let f=h.includes(U),W=A;t.pageOrder.deletePagesFromOrder(h,e.get("_id")).then(()=>{e.deletePages(h,x=>{x instanceof Error?(t.pageOrder.load(e),s(x)):x&&x.deleteNotEmptyPages&&rt(),f?K(W):t.triggerPageChange(),h.forEach(S=>t.removeWorkspace(S)),n({deleted:h})})},(x,S)=>{s(new Error(S))})}),[t,e,O,U,A,rt,K]),Ao=(0,a.useCallback)(o=>new Promise((n,s)=>{e.restorePage(o,{success:d=>{let h=t.workspace.getPageNum();if(!h)throw"Unable to get current page number";let{newPageNum:f,newPageParentId:W}=ke(h,b,M,O);d.set("num",f),d.set("parentPage",W),t.pageOrder.reorderPagesAfterAdd({page:d,magId:e.get("_id")}),e.onAdd(d),e.save(),t.showWorkspace({id:d.id}),n(d)},error:d=>{let h=JSON.parse(d.responseText);h.err==="permission_denied"&&ee("restore page",{type:"type-more-pages"}),s(h)}},!0)}),[t,e,b,M,O,ee]),Io=(0,a.useCallback)(o=>e.deleteTrashPages(o),[e]),Uo=(0,a.useCallback)(()=>new Promise(o=>{e.get("has_deleted_pages")?e.fetchTrashPages().then(n=>{n&&c(s=>({...s,trashPages:n})),o(n)}):o([])}),[e]),Eo=(0,a.useCallback)(()=>e.emptyTrash().then(()=>{c(o=>({...o,trashPages:[]}))}),[e]),Bo=(0,a.useCallback)(()=>e.loadUserTemplates().then(o=>(Array.isArray(o)&&c(n=>({...n,userTemplates:o})),o)),[e]),_o=(0,a.useCallback)(()=>e.hasGlobalWidgets(),[e]),Lo=(0,a.useCallback)((o={})=>t.createTemplateFromCurrentPage(o).then(n=>(n&&c(s=>{let d=Array.from(s.userTemplates);return d.unshift(n),{...s,userTemplates:d}}),n)).catch(n=>{throw n&&n.message==="permission denied"&&ee("create user template",{type:"type-more-pages"}),n}),[t,ee]),Do=(0,a.useCallback)(o=>Rt(o).then(()=>{c(n=>({...n,userTemplates:n.userTemplates.filter(s=>s.id!==o)}))}),[]),Ro=(0,a.useCallback)((o,n)=>{let s={hyphen:"The link should not start or end with a hyphen",onlyNumbers:"The link should not consist of digits only",uriLength:"The link should be less than 128 characters long",used:"You already have a page with this link",pageNotFound:"Can't find current page"},d=e.getPage(o);if(d){let h=d.validate({uri:n,parentPage:d.get("parentPage")});return h?s[Object.keys(h)[0]]:void 0}else return s.pageNotFound},[e]),Ae=(0,a.useCallback)(async()=>{let o=e.getUsedFonts({includeCustom:!0,excludeUnusedDefault:!0}),n=mt.sortFontsByProvider(o);return ft(e.id,n,!0)},[e]),Go=(0,a.useCallback)(()=>{let o=e.get("user").permissions||{},n=o._reasons||{};return o.can_submit_template||n.can_submit_template?.code!=="reason_email_not_confirmed"},[e]),No=(0,a.useCallback)(async(o={})=>{let n=e.get("user").permissions||{},s=Tt(pe.environment.preview,e.getAllWidgets()),d=Q?.plan?.level,h=o.isSharedAsTemplate,f;d==="personal"||d==="freelancer"?f="Please upgrade account to publish another project. Check out the pricing to learn more.":f="Please upgrade your plan to publish more than one project.";let W="Injected Code, Forms, Lottie and Shots will not work in Published project.";if(!n.can_publish&&!h){let x=n._reasons||{},S=x.can_publish&&x.can_publish.code;throw new N({message:he()?"You can't publish another project. Your subscription has been paused":S==="reason_publish_limit"?f:"Please verify your email address to publish this project.",tag:he()?"type-publish-paused-subcription":S==="reason_publish_limit"?"type-publish-limit":"type-publish-noemail"})}else{if(s&&!n.can_use_e_commerce)throw new N({message:"Please upgrade your account to publish project with ecommerce.",tag:"type-publish-ecommerce"});if(h&&!n.can_publish_shared_template)throw new N({message:"Upgrade your plan to publish more templates.",tag:"type-free-publish-template-limit"});if(e.hasCodeInjection()&&!t.me?.get("permissions")?.can_inject_code&&!o.skipWarnings)throw new N({message:W,tag:"type-code-injection",type:"warning"});if(e.hasWidgetsWithType("shots")&&!t.me?.get("permissions")?.can_use_shots&&!o.skipWarnings)throw new N({message:W,tag:"type-widget-shots",type:"warning"});if(e.hasWidgetsWithType("lottie")&&!t.me?.get("permissions")?.can_use_lottie&&!o.skipWarnings)throw new N({message:W,tag:"type-widget-lottie",type:"warning"});if(e.hasWidgetsWithType("form")&&!t.me?.get("permissions")?.can_use_forms&&!o.skipWarnings)throw new N({message:W,tag:"type-widget-shots",type:"warning"})}if(!_){c(x=>(V(te.Publish,{firstTime:!e.get("is_published"),zone:`editor ${x.inPreview?"preview":"project settings"}`,template:h,templatePrice:o.templateSettings?.price,purchaseLinkService:Kt(o.templateSettings?.purchaseLink||"")}),{...x,publishInProgress:!0})),(o.alsoExport&&R.permissions.can_export_template||h)&&t.exportMagAsTemplateset({dontRenewScreenshots:o.dontRenewScreenshots,isSharedAsTemplate:h,templateSettings:o.templateSettings});try{await Ae();let x=e.get("num_id"),S=await ht(x,h);e.set({...e.parse(S),changed:!1}),c(G=>({...G,publishInProgress:!1}))}catch{c(S=>({...S,publishInProgress:!1,isPublishError:!0})),await new Promise(S=>setTimeout(S,5e3)),c(S=>({...S,isPublishError:!1}))}}},[t,e,Q,R,_,Ae]),Ho=(0,a.useCallback)(async()=>{E||(c(o=>({...o,unpublishInProgress:!0})),await bt(e.get("num_id")),V("unpublish",{zone:"editor project settings"}),e.set({is_published:null,published:null,updated:null}),c(o=>({...o,unpublishInProgress:!1})))},[e,E]),Vo=(0,a.useCallback)(async()=>{await Pt(e.get("num_id")),window.location.reload()},[e]),Y=(0,a.useCallback)(o=>t.me&&t.me.get("permissions")[o],[t]),he=(0,a.useCallback)(()=>t.me?.get("permissions")?._reasons?.limited_usage?.code==="reason_subscription_paused",[t]),Fo=(0,a.useCallback)(()=>{if(!Y("can_export_pdf"))throw new N({message:u(xe,{children:["Please upgrade your account",r("br",{}),"to export the project to PDF.",r("br",{}),r("a",{href:`${pe.readymag_host}/pricing`,target:"_blank",rel:"noopener noreferrer",className:"learn-more",children:"See the pricing"})]}),tag:"type-export-pdf"})},[Y]),zo=(0,a.useCallback)(()=>{if(!Y("can_export_code"))throw new N({message:u(xe,{children:["Please upgrade your account",r("br",{}),"in order to export the source",r("br",{}),"code of your projects.",r("br",{}),r("a",{href:`${pe.readymag_host}/pricing`,target:"_blank",rel:"noopener noreferrer",className:"learn-more",children:"See the pricing"}),"."]}),tag:"type-export-code"})},[Y]),jo=(0,a.useCallback)(()=>{if(!Y("can_use_iframe"))throw new N({message:u(xe,{children:["Please upgrade your account",r("br",{}),"in order to use iframe",r("br",{}),"for your projects.",r("br",{}),r("a",{href:`${pe.readymag_host}/pricing`,target:"_blank",rel:"noopener noreferrer",className:"learn-more",children:"See the pricing"}),"."]}),tag:"type-iframe-code"})},[Y]),$o=(0,a.useCallback)(()=>{t.openCodeEditor()},[t]),qo=(0,a.useCallback)(()=>["ci_head","ci_css","ci_body_top","ci_body_bottom"].some(o=>!!T.project[o]),[T.project]),Jo=(0,a.useCallback)(()=>e.hasCodeInjection(),[e]),Yo=(0,a.useCallback)(()=>e.hasWidgetsWithType("shots"),[e]),Xo=(0,a.useCallback)(()=>e.hasWidgetsWithType("form"),[e]),Qo=(0,a.useCallback)(o=>{c(n=>{let s=n.lastSelectedPage&&n.selectedPages.includes(n.lastSelectedPage)?n.lastSelectedPage:t.getCurrentPageId();if(s){let d=n.pagesTree.reduce((S,G)=>(S.push(G),G.children?[...S,...G.children]:S),[]),h=d.findIndex(S=>S._id===o),f=d.findIndex(S=>S._id===s),W=d.slice(Math.min(h,f),Math.max(h,f)+1).map(S=>S._id).filter(S=>!n.selectedPages.includes(S)),x=[...n.selectedPages,...W];return{...n,selectedPages:x,lastSelectedPage:o}}return{...n,lastSelectedPage:o}})},[t]),Ko=(0,a.useCallback)(o=>{c(n=>{let s=[...n.selectedPages];return s.includes(o)?s.splice(s.indexOf(o),1):s.push(o),{...n,selectedPages:s,lastSelectedPage:o}})},[]),Zo=(0,a.useCallback)(()=>{c(o=>({...o,selectedPages:[]}))},[]),en=(0,a.useCallback)(()=>{if(!$)return;let o=t.getCurrentPageId(),n=e.pages.find(s=>s.attributes._id===o);t.unlockPage(n)},[t,e,$]),tn=(0,a.useCallback)(()=>{t.updateUrl(),t.triggerPageChange()},[t]),on=(0,a.useCallback)(o=>{t.getCurrentPageId()!==o.id&&t.showWorkspace(o)},[t]),Ie=(0,a.useCallback)(async o=>{let[n,s]=await Promise.all([Yt(),Xt(o,{})]),{mags:d}=await C.get("/api/readymags/user"),h=n.filter(f=>f.projectNumIds.includes(o));return h.length&&window.RM.constructorRouter.trigger("notice:triggerMetrics","collaboratorAdded"),{team:n,allProjects:d,teamworkProjects:d.filter(f=>f.num_id===o),ownedProjectTeam:h,projectTeam:s}},[]),nn=(0,a.useCallback)((o,n)=>{c(s=>({...s,team:o,ownedProjectTeam:o.filter(d=>d.projectNumIds.includes(n))}))},[]),rn=(0,a.useCallback)(o=>{let n=o||(t.me?t.me.get("_id"):"");return Bt(n)},[t]),sn=(0,a.useCallback)(o=>{let n=o||(t.me?t.me.get("_id"):"");return _t(n)},[t]),an=(0,a.useCallback)(o=>St({...o,numId:o.numId?o.numId:e.get("num_id")}).then(()=>{let{isPrivate:n,isPrivatePages:s,password:d}=o;e.set({is_private:n,isPrivatePages:s,pass:d})}),[e]),ln=(0,a.useCallback)(o=>Lt(o).then(n=>(e.set({creatorProfile:o}),n)),[e]),dn=(0,a.useCallback)(()=>Vt(e.get("num_id")),[e]),pn=(0,a.useCallback)(o=>Gt({...o,num_id:e.get("num_id")}).then(n=>(e.set({templateSubmissionStatus:n.status}),n)),[e]),gn=(0,a.useCallback)(o=>Ft(o).then(n=>(e.set({templateSubmissionStatus:n.status}),n.status)),[e]),un=(0,a.useCallback)(()=>Nt({num_id:e.get("num_id")}).then(o=>(e.set({templateSubmissionStatus:o.status}),o.status)),[e]),cn=(0,a.useCallback)(()=>Ht({num_id:e.get("num_id")}).then(o=>(e.set({templateSubmissionStatus:o.status}),o.status)),[e]),mn=(0,a.useCallback)(({pageId:o,isPrivate:n,updateAll:s=!1})=>{let d=(f,W,x)=>f.map(S=>((s||S._id===W)&&(S.isPrivate=x),S)),h=s?T.pages.map(f=>f._id):[o];for(let f of h)if(typeof f<"u"){let W=Oe(f,{isPrivate:n},{patch:!0});W.done(()=>{W&&!(W instanceof Error)&&c(x=>{let S=d(x.pages,f,n),G=x.pagesTree.map(F=>({...F,isPrivate:s||F._id===f?n:F.isPrivate,children:F.children?d(F.children,f,n):F.children}));return{...x,pages:S,pagesTree:G,pagesParams:We(G,x.pagesParams)}})})}},[Oe,T,c]),Tn=(0,a.useCallback)(o=>{let n=R.permissions.viewer_opts_overrides||{},d={...e.get("opts"),...o==="phone_portrait"?e.get("viewport_phone_portrait")?.opts||{}:o==="tablet_portrait"?e.get("viewport_tablet_portrait")?.opts||{}:{},...n};return{...d,...e.get("is_private")&&{sharebutton:!1},...!d.menubutton&&{projectinfo:!1}}},[e,R]),Pe=(0,a.useCallback)((o,n,s)=>{let d=Je.default.intersection(Object.keys(o),pt).length>0,h=s==="phone_portrait"||s==="tablet_portrait",f=d&&h?s:"default",W=Object.keys(o)[0],x={...o,...o.menubutton===!1&&{projectinfo:!1}};if(["arrows","menubutton","projectinfo","sharebutton","pagecounter","controlsontop","controlsontop","branding","slidein","scalableviewer"].includes(W)&&W==="scalableviewer"&&V(te.SettingsViewer,{settingsType:"scale layout"}),f==="phone_portrait"||f==="tablet_portrait"){let S=`viewport_${f}`,G={...e.get(S)?.opts||{},...x};return e.set(S,{...e.get(S)||{},opts:G},n),eo(e.get("num_id"),G,f)}else{let S={...e.get("opts"),...x};return e.set("opts",S,n),eo(e.get("num_id"),S,f)}},[e,y]),hn=(0,a.useCallback)((o,n)=>jt({numId:P,domainName:o,domainSource:n}).then(s=>(se({last_checked_domain:o,last_checked_domain_source:n},{silent:!0}),s)),[P,se]),Pn=(0,a.useCallback)(o=>$t(P,o).then(()=>{se({domain:o,domainStatus:"on"})}),[P,se]),bn=(0,a.useCallback)(()=>qt(P).then(o=>(Te("domain"),Te("domainStatus"),V(te.SettingsProject,{settingsType:"unmap domain"}),o)),[e,k,P,y,Te,Pe]),Ue=(0,a.useCallback)((o,n)=>{o&&c(s=>{let d=o.pages.models.map(f=>m(f)).filter(f=>n.includes(f._id));d.sort((f,W)=>f.num-W.num);let h=Me(d,null);return{...s,project:o.attributes,pages:d,pagesTree:h,pagesParams:We(h,s.pagesParams)}})},[m]),Ee=(0,a.useCallback)(o=>{o&&c(n=>({...n,project:o.attributes}))},[]),Be=(0,a.useCallback)((o,n,s)=>{o&&(o.changed&&!s?.socketUpdate&&(o.changed.num||o.changed.parentPage)||c(d=>{let h=Z(o,d.pages);h.sort((W,x)=>W.num-x.num);let f=Me(h,null);return{...d,pages:h,pagesTree:f,pagesParams:We(f,d.pagesParams)}}))},[Z]),_e=(0,a.useCallback)(o=>{o&&c(n=>{let s=Array.from(n.trashPages);return s.unshift(o.attributes),{...n,trashPages:s}})},[]),Le=(0,a.useCallback)(o=>{o&&c(n=>{let s=Array.from(n.trashPages),d=s.findIndex(h=>h._id===o.get("_id"));return d>-1&&s.splice(d,1),{...n,trashPages:s}})},[]);(0,a.useEffect)(()=>{function o(){Ie(e.attributes.num_id).then(n=>{c(s=>({...s,...n}))})}return o(),e.on(to(),Ee),e.on("change:pids",Ue),e.pages.on(oo(),Be),e.trashPages.on("add",_e),e.trashPages.on("remove",Le),I.on("refreshTeamworkData",o),()=>{e.off(to(),Ee),e.off("change:pids",Ue),e.pages.off(oo(),Be),e.trashPages.off("add",_e),e.trashPages.off("remove",Le),I.off("refreshTeamworkData",o)}},[e,Ee,Ue,_e,Le,Be,Ie]);let De=(0,a.useCallback)(o=>st(o),[]);(0,a.useEffect)(()=>(t.on("togglePreview",De),()=>{t.off("togglePreview",De)}),[t,De]);let Re=(0,a.useCallback)(o=>{let n=o.getPageNum(),s=o.getPageId();n&&s&&c(d=>({...d,currentPageNum:n,currentPageId:s}))},[]);(0,a.useEffect)(()=>(t.on("pageChange",Re),()=>{t.off("pageChange",Re)}),[t,Re]);let be=(0,a.useCallback)(o=>{c(n=>({...n,currentPageNum:o.num,currentPageId:o._id}))},[]);(0,a.useEffect)(()=>(T.inPreview?t.on("previewPageChange",be):t.off("previewPageChange",be),()=>{t.off("previewPageChange",be)}),[T.inPreview,t,be]);let Ge=(0,a.useCallback)((o,n)=>{c(s=>({...s,lockedPages:{...s.lockedPages,[o]:n}}))},[]),Ne=(0,a.useCallback)(o=>{c(n=>{let{[o]:s,...d}=n.lockedPages;return{...n,lockedPages:d}})},[]),He=(0,a.useCallback)(({list:o})=>{c(n=>({...n,collaborators:o||[]}))},[]);(0,a.useEffect)(()=>(I.on("page:locked",Ge),I.on("page:unlocked",Ne),I.on("sockets:connect",He),()=>{I.off("page:locked",Ge),I.off("page:unlocked",Ne),I.off("sockets:connect",He)}),[Ge,Ne,He]),(0,a.useEffect)(()=>{y.branding===void 0&&Pe({branding:y.endpage})},[y,Pe]);let fn=(0,a.useCallback)(o=>{let n=T.project.user.permissions.viewer_opts_overrides||{};return{disabled:[...Object.keys(n),...o?.menubutton?[]:["projectinfo"],...T.project.is_private?["sharebutton"]:[],...T.project.user.permissions.must_show_branding?["branding"]:[]],permissionOverrides:n}},[T.project]),Sn=(0,a.useCallback)(async(o,n)=>{await yt(o,n),c(s=>({...s,project:{...s.project,allow_iframe_embed:o==="allow"}}))},[]),xn=(0,a.useCallback)(()=>{let o=t.workspace.$scroller.scrollTop();t.togglePreview({scrollTop:o,pageNumber:A}),t.trigger("notice:triggerEduTipClose")},[t,A]),yn={projectSet:se,projectUnset:Te,projectSave:fo,pageSet:So,pageUnset:xo,pageSave:Oe,setCurrentPageNum:yo,setInPreview:st,setPageCollapse:Co,addNewPage:ko,duplicatePage:Wo,renewLastScreenshot:Mo,updatePageScreenshot:ae,updateBrokenScreenshot:wo,restorePage:Ao,saveOrder:vo,deletePage:Oo,deletePagesFromTrash:Io,updateTrash:Uo,emptyTrash:Eo,getUserTemplates:Bo,hasGlobalWidgets:_o,createTemplateFromCurrentPage:Lo,deleteUserTemplate:Do,validatePageUri:Ro,updateUsedFonts:Ae,publishWithNotice:No,unpublish:Ho,restoreToPublished:Vo,checkPDFExportPermission:Fo,checkHTMLExportPermission:zo,checkIFrameExportPermission:jo,openCodeEditor:$o,hasProjectCode:qo,hasCustomCode:Jo,hasShots:Yo,hasForms:Xo,hasPermission:Y,isSubscriptionPaused:he,selectPage:Ko,selectPagesRange:Qo,deselectPages:Zo,takeOverCurrentPage:en,updateUrl:tn,changeWorkspace:on,loadTeamworkData:Ie,updateTeam:nn,getProjectOptions:Tn,setProjectOptions:Pe,loadUserProjectsLinks:rn,getDomainsAmount:sn,setPrivacy:an,sendCreatorProfile:ln,getSubmissionStatus:gn,sendTemplateSubmission:pn,sendUnsubmitTemplate:un,sendResubmitTemplate:cn,setPageIsPrivate:mn,checkDomain:hn,mapDomain:Pn,unmapDomain:bn,getProjectPermissionsOverrides:fn,toggleAllowIframeEmbed:Sn,switchToPreview:xn,fetchTemplateStats:dn,checkIsEmailVerified:Go};return r(Ye.Provider,{value:{...T,...yn,projectMag:e},children:l})}var a,Je,Ye,eo,Me,We,to,oo,Rn,no=B(()=>{"use strict";a=de(Ve());Fe();Je=de(lt());Ut();oe();vn();An();In();kn();Se();wn();Et();Wn();Un();Dt();zt();Jt();Qt();je();qe();Zt();q();Ye=(0,a.createContext)({}),eo=Je.default.throttle(xt,300),Me=(e,t)=>{let i=[];for(let l in e)if(e[l].parentPage===t){let m=Me(e,e[l]._id),T=Object.assign({},e[l]);m.length&&(T.children=m),i.push(T)}else if(e[l].parentPage===void 0){let m=Object.assign({},e[l]);i.push(m)}return i},We=(e,t)=>{let i={};return e.forEach((l,m)=>{if(i[l._id]={collapsed:t[l._id]?t[l._id].collapsed:!0,viewNum:m+1,uri:l.uri?l.uri:(m+1).toString(),children:[]},l.children){let T=[];l.children.forEach((c,b)=>{T.push(c._id),i[c._id]={collapsed:t[c._id]?t[c._id].collapsed:!0,viewNum:b+1,uri:c.uri?c.uri:(b+1).toString(),children:[],parentId:l._id}}),i[l._id].children=T}}),i},to=()=>["title","description","user","folder","uri","domain","domainStatus","last_checked_domain","has_deleted_pages","master_share_pid","changed","is_published","is_private","isPrivatePages","isCopyableTemplate","pass","pass_bg","published","opts","viewport_phone_portrait","viewport_tablet_portrait"].map(t=>`change:${t}`).join(" "),oo=()=>["num","parentPage","screenshot","viewport_phone_portrait","viewport_tablet_portrait","title","uri","seo","hidden","custom_shares"].map(t=>`change:${t}`).join(" ");Rn=()=>(0,a.useContext)(Ye)});var Xe=B(()=>{"use strict"});function zn({magModel:e,router:t,children:i}){let[l,m]=(0,L.useReducer)(Fn,{router:t,magModel:e},Hn);(0,L.useEffect)(()=>{let P=()=>{m({type:"togglePreview"})};return l.inPreview?(window.RM.constructorRouter.off("previewOpen",P),window.RM.constructorRouter.on("previewClose",P)):(window.RM.constructorRouter.off("previewClose",P),window.RM.constructorRouter.on("previewOpen",P)),()=>{window.RM.constructorRouter.off("previewOpen",P),window.RM.constructorRouter.off("previewClose",P)}},[l.inPreview]),(0,L.useEffect)(()=>{localStorage.setItem(io,JSON.stringify({gridSize:l.gridSize}))},[l.gridSize]),(0,L.useEffect)(()=>{window.Cookiebot&&c(window.Cookiebot?.consent.preferences)},[window.Cookiebot?.consent?.stamp]);let T=(0,L.useCallback)(()=>{m({type:"openMagMenu"})},[]),c=(0,L.useCallback)(P=>{if(window.Cookiebot)if(window.Cookiebot.consent?.stamp==="0")window.Cookiebot.submitCustomConsent(!1,!1,!1);else{let{statistics:k,marketing:U}=window.Cookiebot.consent;window.Cookiebot.submitCustomConsent(P,k,U)}m({type:"toggleHasPreferencesConsent",hasPreferencesConsent:P})},[]),b=(0,L.useCallback)(()=>{m({type:"closeMagMenu"})},[]),M=(0,L.useCallback)((P,k)=>{k.viewertype!==l.magMenuOrientation&&m({type:"setMagMenuOrientation",orientation:k.viewertype}),k.menubutton!==l.magMenuOn&&m({type:"setMagMenu",isOn:k.menubutton}),k.controlsontop!==l.controlsOnTop&&m({type:"setControlsOnTop",onTop:k.controlsontop})},[l.magMenuOrientation,l.magMenuOn,l.controlsOnTop]);(0,L.useEffect)(()=>(I.on("magMenu:open",T),I.on("magMenu:close",b),()=>{I.off("magMenu:open",T),I.off("magMenu:close",b)}),[T,b]),(0,L.useEffect)(()=>(I.listenTo(e,"change:opts",M),()=>{I.stopListening(e,"change:opts",M)}),[M]);let O=(0,L.useCallback)(()=>{m({type:"setReadyToPublish",ready:!0})},[]);(0,L.useEffect)(()=>(I.listenTo(t,"previewMag:load:success",O),()=>{I.stopListening(t,"previewMag:load:success",O)}),[O]);let R=()=>{m({type:"toggleCartSidebarState"})};(0,L.useEffect)(()=>(I.on("ecommerce:cartsidebar:visibility:changed",R),()=>{I.off("ecommerce:cartsidebar:visibility:changed",R)}),[R]);let y=(P,k)=>new Promise((U,A)=>{let _=e.getPage(P);_||U(null),_.save({hidden:k}).done(E=>{U(E)}).fail(E=>{A(E.responseJSON)})});return r(ge.Provider,{value:{...l,dispatch:m,setPageVisibility:y},children:i})}var L,ge,io,ro,Hn,Vn,Fn,jn,so=B(()=>{"use strict";L=de(Ve());Xe();Se();q();ge=(0,L.createContext)({}),io="rm_pageSettings",ro={};try{let e=localStorage.getItem(io);ro=JSON.parse(e||"{}")}catch{}Hn=({router:e,magModel:t})=>({inPreview:!!e.previewMode,isMagMenuOpen:!1,isTrashOpened:!1,isPageSettingsOpened:!1,isPrivatePagesOpened:!1,isHelpPopupOpened:!1,isUserTemplatesModalShown:!1,isRmTemplatesModalShown:!1,isPageActionsPopupOpenedFor:!1,gridSize:ro.gridSize||0,selectedPages:{},isDragging:!1,magMenuOrientation:t.attributes.opts.viewertype,magMenuOn:t.attributes.opts.menubutton,controlsOnTop:t.attributes.opts.controlsontop,readyToPublish:!0,addingPage:!1,isTeamworkModalOpened:!1,exportAsTemlate:!1,dontRenewScreenshots:!1,currentOnboardingType:e.currentOnboardingType,helpTourIsFinished:!!e.helpTourIsFinished,isCartSidebarOpened:!1,showTips:!!e.me?.attributes.constructor_show_tips,masterSharePidIsChanging:!1,isCopyableSwitcherEnabled:!!t.attributes.isCopyableTemplate,isTemplateShareSettingsOpened:!1,hasPreferencesConsent:!1,showSettingsCookiesModal:!1}),Vn=(e,t)=>{let i={...e.selectedPages};return i[t]?delete i[t]:i[t]=!0,i},Fn=(e,t)=>{switch(t.type){case"togglePreview":{let i=!e.inPreview;return{...e,inPreview:i,readyToPublish:i?!1:e.readyToPublish,notice:void 0}}case"openMagMenu":return{...e,isMagMenuOpen:!0};case"closeMagMenu":return{...e,isMagMenuOpen:!1};case"setMagMenuOrientation":return{...e,magMenuOrientation:t.orientation};case"setMagMenu":return{...e,magMenuOn:t.isOn};case"setControlsOnTop":return{...e,controlsOnTop:t.onTop};case"toggleTrash":return{...e,isTrashOpened:!e.isTrashOpened};case"togglePageSettings":return{...e,isPageSettingsOpened:!e.isPageSettingsOpened,isHelpPanelOpen:!1};case"togglePrivatePages":return{...e,isPrivatePagesOpened:t.payload?!0:!e.isPrivatePagesOpened,privatePageSelected:t.payload};case"toggleHelpPopup":return{...e,isHelpPopupOpened:!e.isHelpPopupOpened};case"toggleHelpTourIsFinished":return{...e,helpTourIsFinished:t.finished};case"toggleUserTemplatesModal":return{...e,isUserTemplatesModalShown:!e.isUserTemplatesModalShown};case"toggleRmTemplatesModal":return{...e,isRmTemplatesModalShown:!e.isRmTemplatesModalShown};case"setPageActionsPopup":return{...e,isPageActionsPopupOpenedFor:t.payload};case"toggleGridSize":return{...e,gridSize:e.gridSize===0?1:0};case"togglePageSelection":return{...e,selectedPages:Vn(e,t.payload)};case"setDragging":return{...e,isDragging:t.payload};case"setReadyToPublish":return{...e,readyToPublish:t.ready};case"setAddingPage":return{...e,addingPage:t.inProgress};case"toggleTeamworkModal":return{...e,isTeamworkModalOpened:t.payload};case"toggleExportAsTemlate":return{...e,exportAsTemlate:!e.exportAsTemlate};case"toggleDontRenewScreenshots":return{...e,dontRenewScreenshots:!e.dontRenewScreenshots};case"setOnboardingType":return{...e,currentOnboardingType:t.onboardingType};case"toggleCartSidebarState":return{...e,isCartSidebarOpened:!e.isCartSidebarOpened};case"toggleShowTips":return{...e,showTips:!e.showTips};case"toggleMasterSharePidChanging":return{...e,masterSharePidIsChanging:!e.masterSharePidIsChanging};case"toggleSettingsCookiesModal":return{...e,showSettingsCookiesModal:t.open};case"toggleTemplateShareMode":return{...e,isCopyableSwitcherEnabled:!e.isCopyableSwitcherEnabled};case"ToggleTemplateShareSettings":return{...e,isTemplateShareSettingsOpened:!e.isTemplateShareSettingsOpened};default:return e}};jn=()=>(0,L.useContext)(ge)});var ao=B(()=>{"use strict";no();so();Xe()});function Ms(){let e=et(),t=(0,me.useContext)(ge);(0,me.useEffect)(()=>{typeof window<"u"&&window.RM&&j({...e,router:window.RM.constructorRouter})},[]);let[{router:i}]=oi(),l=(y,P,k)=>{let U=k?.me;if(!U)return;let A=U.get("edu_tips_state")||{};if(A[y]=P,Kn({tipsState:A,router:k})){let _=ot();tt(_),mo(A),P===2&&Yn(U,{edu_tips_state:A,behavior_metrics:_})}},m=(y,P={})=>{ie()||(P.closeByTimer&&(delete P.closeByTimer,setTimeout(()=>{j(e.visible?{...e,visible:!1}:e)},Ze)),j({...e,...P,message:y,needShowHelpIcon:!1,visible:!0,isTipType:!1}))},T=y=>{j({...e,message:y})},c=(y={})=>{let P=et();P.message==="eduTipMobileLayoutVideo"&&(y.context==="clickOnWorkSpace"||y.context==="timeout")||P.message&&(l(P.message,3,i),j({...P,visible:!1}))},b=(y,P={})=>{if(ie()||!i||!i.me||!t.showTips||!Ke())return;let U=(i.me.get("edu_tips_state")||{})[y]||0;if(P.closeByTimer)delete P.closeByTimer,po(),ue=setTimeout(()=>{c({context:"timeout"})},Ze);else{po(),ue=setTimeout(()=>{c({context:"timeout"})},qn);let A=Xn(y);A&&l(A,3,i)}switch(U){case 3:break;case 2:if(P.showOnce)break;j({...e,visible:!0,message:y,canBeClosed:!0,needShowHelpIcon:!0,isTipType:!0,standAlone:P.standAlone});break;case 0:{l(y,2,i),I.trigger("tips:show",y);let A=ei(y);A&&V(te.EditorTips2,{tip:A,action:"impression"}),Qn(),M(),j({...e,visible:!0,message:y,canBeClosed:!0,needShowHelpIcon:!0,isTipType:!0,standAlone:P.standAlone})}}},M=()=>{e.visible&&j({...e,visible:!1})},O=(y,P)=>{if(ie()||!i||!i.me||!i.me.get("constructor_show_tips")||!t.showTips||!Ke())return;let k=Zn(y,P,i),U=i.me.get("edu_tips_state")||{},A=(_,E)=>{if(!_||!E)return!1;if(typeof E!="function"&&"orConditions"in E&&Array.isArray(E.orConditions))return E.orConditions.some($=>A(_,$));if(typeof E!="function"&&!(E instanceof Array)){for(let $ in E)if(E.hasOwnProperty($)){let Q=E,K=_?.[$],Z=Q[$];if(typeof Z=="number"&&typeof K=="number"){if(Z>K)return!1}else if(Z!==K)return!1}return!0}return!1};for(let _ in Qe)if(Qe.hasOwnProperty(_)&&!U[_]){let E=Qe[_],$=typeof E=="function"?E(k):A(k,E),Q=Jn.includes(_);$&&b(_,{showOnce:!0,standAlone:Q})}},R=({id:y,color:P})=>{if(ie()||!i||!i.me||!Ke())return;let k=i.me.get("behavior_metrics")||{},U=k.triggeredColors||{},A=Array.isArray(P)?P[0]:P;if(y in U)U[y]=A;else{for(let _ of Object.values(U))_===A&&b("eduTipUseColorPalette");U[y]=A,k.triggeredColors=U,i.me.save({behavior_metrics:k},{patch:!0})}};return(0,me.useEffect)(()=>{if(i)return i.on("notice:show",m),i.on("notice:hide",M),i.on("notice:triggerEduTip",b),i.on("notice:triggerEduTipClose",c),i.on("notice:triggerMetrics",O),i.on("notice:triggerColorMetrics",R),()=>{i.off("notice:show",m),i.off("notice:hide",M),i.off("notice:triggerEduTip",b),i.off("notice:triggerEduTipClose",c),i.off("notice:triggerMetrics",O),i.off("notice:triggerColorMetrics",R)}},[i,e]),{showNotice:m,setNoticeMessage:T,triggerEduTip:b,triggerEduTipClose:c,hideNotice:M,triggerMetrics:O,triggerColorMetrics:R}}function vs(e,t){if(ie())return;let i=et();t.closeByTimer&&(delete t.closeByTimer,setTimeout(()=>{j(i.visible?{...i,visible:!1}:i)},Ze)),j({needShowHelpIcon:!1,isTipType:!1,...t,message:e,visible:!0})}function Os(){j({visible:!1,variant:void 0,placement:void 0,withLoader:!1})}var ce,me,$n,Qe,Ze,qn,ue,ks,Jn,lo,Yn,Ws,Xn,Ke,Qn,uo,co,tt,ot,mo,To,Kn,Zn,ei,ti,po,oi,j,et,qe=B(()=>{"use strict";ce=de(lt()),me=de(Ve());Fe();ut();Se();je();go();ao();Cn();$n=5,Qe={eduTipOnDeleteMobileWidget:{widgetDeletedOnMobile:!0},eduTipUseFix:{countWidgetCreated:11,fixedWidgetUsed:void 0},eduTipUseAbovePages:{countFixedWidgetCreated:3,onAllPagesWidgetUsed:void 0},eduTipUsePlusIcon:{helpTourSkipped:!0},eduTipUseWidgetSettings:{helpTourSkipped:!0,countWidgetCreated:1},eduTipUseBlocks:{secondWidgetMoved:!0},eduTipUseUndo:{widgetMoved:!0,countActionsCanceled:void 0},eduTipUseTextTypographyControl:{templateUsed:void 0,countTextWidgetCreated:5},eduTipUseTextEditControl:{templateUsed:void 0,textWidgetCopied:!0},eduTipUseArrangeControl:{mobileGroupSelected:!0},eduTipUseGroupEditing:{multipleWidgetsOfSameTypeSelected:!0},eduTipUseGrids:{templateUsed:void 0,orConditions:[{countWidgetCreated:3},{countTextWidgetCreated:3},{gridsShortcutPressed:!0}]},eduTipUseAnimation:{animationPanelOpened:!0},eduTipUseLearn:{countActionsCanceled:3},eduTipUsePresets:{countWidgetPanelOpened:3},eduTipUseHideWidget:{opacityAnimationAdded:!0},eduTipNewTemplate:{newProjectAfterTemplatesOnboarding:!0},eduTipUseComments:{collaboratorAdded:!0},eduTipDragGroup:{groupMovedDown:!0},eduTipUseCodePanel:{codePanelOpened:!0},eduTipMobileLayoutVideo:{viewportAdded:!0}},Ze=6e3,qn=15e3,ue=null,ks=["eduTipUseWidgetSettings","eduTipUseColorPalette","eduTipUseArrangeControl","eduTipUseTextEditControl","eduTipUseTextTypographyControl","eduTipUseGroupEditing"],Jn=["eduTipUseOnboarding","eduTipUseNavigation","eduTipDragGroup","eduTipOnDeleteMobileWidget","eduTipUseFix","eduTipUseLearn","eduTipUseUndo","eduTipUseCodePanel"],lo=[["eduTipUseTextEditControl","eduTipUseTextTypographyControl"]],Yn=dt((e,t)=>{e.save(t,{patch:!0,silent:!0})},3e3,{trailing:!0}),Ws=e=>{let t=e?.me;if(!t)return;let i=t.get("behavior_metrics")||{},l=ot(),m={...i,...l},T=t.get("edu_tips_state")||{},c=To(),b={...T,...c},M=!ce.default.isEqual(l,m),O=!ce.default.isEqual(c,b);M&&tt(m),O&&mo(b)},Xn=e=>{for(let t=0;t<lo.length;t++){let i=lo[t];if(i.includes(e))return i.find(l=>l!==e)}return!1},Ke=()=>parseInt(sessionStorage.getItem("shownTipsCount")||"0",10)<$n,Qn=()=>{let e=parseInt(sessionStorage.getItem("shownTipsCount")||"0",10);sessionStorage.setItem("shownTipsCount",(e+1).toString())},uo=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},co=e=>{let t=localStorage.getItem(e);return t?JSON.parse(t):{}},tt=e=>{uo("userMetrics",e)},ot=()=>co("userMetrics"),mo=e=>{uo("eduTipsState",e)},To=()=>co("eduTipsState"),Kn=({tipsState:e,metrics:t,router:i})=>{let l=i?.me;if(!l)return!1;let m=e||l.get("edu_tips_state")||{},T=t||l.get("behavior_metrics")||{},c=To(),b=ot(),M=!ce.default.isEqual(c,m),O=!ce.default.isEqual(b,T);return M||O},Zn=(e,t,i)=>{let l=i?.me;if(!l)return{};let m=l.get("behavior_metrics")||{},T=e.includes("count"),c=m[e];return T&&t===void 0?m[e]=typeof c=="number"?c+1:1:m[e]=t===void 0?!0:t,tt(m),m},ei=e=>{switch(e){case"eduTipUsePlusIcon":return"plus icon";case"eduTipUseWidgetSettings":return"widget settings";case"eduTipUseBlocks":return"distance between blocks";case"eduTipUseNavigation":return"horizontal vertical navigation";case"eduTipUseColorPalette":return"palette";case"eduTipUseTextTypographyControl":return"text styles";case"eduTipUseTextEditControl":return"text styles";case"eduTipUseOnboarding":return"beginners onboarding kit";case"eduTipUseArrangeControl":return"arrange";case"eduTipUseUndo":return"undo";case"eduTipUseBlueDiamond":return"blue diamond";case"eduTipUseGrids":return"use grids";case"eduTipUseAnimation":return"animate widgets";case"eduTipOnDeleteMobileWidget":return"widget still exists in desktop";case"eduTipDragGroup":return"triangle icon";case"eduTipUseFix":return"fix any widget";case"eduTipUseAbovePages":return"above pages toggle";case"eduTipUseCodePanel":return"code";case"eduTipUseComments":return"comments";case"eduTipUseLearn":return"link to learn";case"eduTipUseGroupEditing":return"group edit";case"eduTipUseHideWidget":return"hide a widget";case"eduTipUsePresets":return"presets";case"eduTipNewTemplate":return"templates in pages panel";case"eduTipMobileLayoutVideo":return"mobile layout";default:return!1}},ti={message:"",visible:!1,canBeClosed:!0,needShowHelpIcon:!1,isTipType:!1,router:null},po=()=>{ue!==null&&(clearTimeout(ue),ue=null)},[oi,j,et]=ye(ti)});var ho,nt,ni,Po,ii,ri,J,Vs,Fs,X,bo,zs,js,si,ai,$s,qs,Js,Ys,ie,go=B(()=>{"use strict";ut();Fe();Se();Ot();ne();It();qe();On();ho={tourType:"default",modalStatus:"unshow",started:!1,waiting:!1,showNotice:!1,step:null,totalSteps:0,config:{}},nt=new Set,ni=()=>{let e=window.RM.constructorRouter?.me,t=e?.get("behavior_metrics")||{};if(!t||!e)return;let i={...t,constructor_tour_finished:!0};e.save({behavior_metrics:i},{patch:!0})},Po=(e,t)=>t?Array.isArray(e)?e.includes(t.name):t.name===e:!1,[ii,ri,J,Vs]=ye(ho),Fs=()=>ii({hookType:"layout"}),X=e=>{ri(e),I.trigger("helptour:update",e)},bo=e=>{let t=J();X({...t,modalStatus:e})},zs=(e="default",t={headlessMode:!1})=>{if(J().started)return;let m=Object.values(we[e]),T=m[0];if(X({tourType:e,modalStatus:"unshow",started:!0,waiting:!1,showNotice:!1,step:T,totalSteps:m.length,config:t}),t.headlessMode)return;let c=e==="pro"?"helpTourPro":"helpTour";V(c,{status:"started",version:"2602_6051"})},js=()=>{let{started:e}=J();e&&bo("closing")},si=()=>{let{started:e,step:t,totalSteps:i,tourType:l,config:m}=J();if(!e||!t){setTimeout(()=>{window.RM.constructorRouter.trigger("notice:triggerMetrics","helpTourSkipped")},1e3);return}nt.clear(),X({...ho,tourType:l}),!m.headlessMode&&t?.num<i&&At()},ai=e=>{let{step:t,tourType:i,config:l}=J();if(si(),l.headlessMode||bo("end"),e?.(),ni(),l.headlessMode)return;let m=i==="pro"?"helpTourProProgress":"helpTourProgress",T=i==="pro"?"helpTourPro":"helpTour";V(m,{step:t?.num,version:"2602_6051"}),V(T,{status:"finished",version:"2602_6051"})},$s=(e,t)=>{let i=J(),{step:l,started:m,tourType:T,totalSteps:c,config:b}=i;if(!m)return;if(!l?.nextStep){ai(t?.cb);return}let O=(Array.isArray(e)?e:[e]).includes(l.name),R=t?.fallback;if(!O||R&&!l.fallbackStep)return;let y=R&&l.fallbackStep?l.fallbackStep:l.nextStep,P=we[T][y];P&&(X({...i,waiting:!1,showNotice:!1,step:P}),!b.headlessMode&&ct(()=>{for(let k=1;k<=c&&!(k>l.num);k++)if(k<=l.num&&!nt.has(k)){let U=T==="pro"?"helpTourProProgress":"helpTourProgress";V(U,{step:k,version:"2602_6051"}),nt.add(k)}}))},qs=e=>{let t=J(),{step:i,started:l,tourType:m}=t;if(!l||!i?.prevStep||!(Array.isArray(e)?e:[e]).includes(i.name))return;let b=we[m][i.prevStep];b&&X({...t,waiting:!1,showNotice:!1,step:b})},Js=e=>{let t=J(),{step:i,started:l}=t;!l||!Po(e,i)||X({...t,waiting:!0})},Ys=(e,t)=>{let i=J(),{step:l,started:m,showNotice:T}=i;!m||!Po(e,l)||X({...i,showNotice:t.show??!T})},ie=()=>J().started});export{En as a,Bn as b,Ut as c,N as d,Et as e,Ni as f,Dt as g,Fi as h,zi as i,ji as j,zt as k,Ji as l,Yi as m,Jt as n,Ki as o,Zi as p,er as q,tr as r,Qt as s,je as t,p as u,g as v,$e as w,Ot as x,J as y,Fs as z,bo as A,zs as B,js as C,si as D,$s as E,qs as F,Js as G,Ys as H,ie as I,go as J,ks as K,Ws as L,ei as M,oi as N,et as O,Ms as P,vs as Q,Os as R,qe as S,nr as T,ir as U,Kt as V,rr as W,sr as X,Zt as Y,Ye as Z,Dn as _,Rn as $,Xe as aa,ge as ba,zn as ca,jn as da,so as ea,ao as fa};
