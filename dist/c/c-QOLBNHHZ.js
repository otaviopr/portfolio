import{a as F}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-T55G23V6.js";import{a as y,b as j}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-LLEOWBFP.js";import{o as E,p as k,q as S,r as z}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-ADTYP7RM.js";import{a as P}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-ME4YHRBD.js";import{b as _,c as A}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-BMPTOLAX.js";import{a as x}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-VROFLEW4.js";import{b as T}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-2YXWJ5TM.js";import{a as M,d as I}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-CDDSJHLM.js";function R(t,e){if(!t)return;let i=["allow-top-navigation","allow-top-navigation-by-user-activation","allow-modals","allow-popups","allow-popups-to-escape-sandbox"],n=["allow-scripts","allow-forms","allow-same-origin"],r=e&&Array.isArray(e)?e.filter(function(a){return!l.default.contains(i,a.toLowerCase())}):n;!!RM.constructorRouter?.suspendCustomCodeWidgetsExecution&&(r=r.filter(a=>a!=="allow-scripts")),t.attr("sandbox",r.join(" "))}var d,v,l,C,f,c,b,X,H=M(()=>{"use strict";d=I(x()),v=I(P()),l=I(T());z();A();k();j();C=I(F()),f={},c={};c.findPlugin=function(t){let e=(0,C.getEmbedType)(t.code);return l.default.find(f,function(i,n){return n.toLowerCase()===e})};b=v.default.View.extend({embed_type:null,containerSelector:null,resizable:!0,proportional:!1,forceFrameSize:!1,initialize:function(t){this.block=t.block,this.widget=t.widget,l.default.bindAll(this),this.isInViewer=RM.viewerRouter||RM.constructorRouter&&RM.constructorRouter.preview},parse:function(t,e){return e(t)},sanitize:function(t){return(0,d.default)(t)},draw:function(t){t()}});c.instagramEmbedCallbacks=[];c.initInstagram=function(t){if(window.instgrm&&window.instgrm.Embeds&&l.default.isFunction(window.instgrm.Embeds.process))return instgrm.Embeds.process(),t();c.instagramEmbedCallbacks.push(t),c.instagramInitXhr&&c.instagramInitXhr.abort(),(0,d.default)('body > script[src^="//platform.instagram.com"]').remove(),c.instagramInitXhr=d.default.ajax({url:S.selectProtocol("//platform.instagram.com/en_US/embeds.js"),dataType:"script",cache:!0,success:function(){l.default.each(c.instagramEmbedCallbacks,function(e){l.default.isFunction(e)&&e()})}})};f.Instagram=b.extend({embed_type:"instagram",containerSelector:"iframe",resizable:!0,initialize:function(){b.prototype.initialize.apply(this,arguments),this.block&&l.default.extend(this.block.frame,{minwidth:164,minheight:264})},parse:function(t,e){return e(t.replace(/<script.*script>/i,""))},draw:function(t,e,i){let n,r,o,a,m,s=0,u=100,g=20,h=50,p=!1;e.html(t),c.initInstagram(function(){m=setInterval(function(){if(s++,n=e.children(this.containerSelector),r=n.height(),r||s>g){if(r||s>h){r&&RM.common.mode==="constructor"&&(o=n.width(),a=n.height()),clearInterval(m),i(o,a);return}if(p)return;p=!0,i()}}.bind(this),u)}.bind(this))},customResizeHandler:function(t){return t}});c.pinterestEmbedCallbacks=[];c.initPinterest=function(t){let e,i=0,n=20;if(l.default.isFunction(window.parsePinBtns))return t();c.pinterestEmbedCallbacks.push(t),(0,d.default)('body > script[src^="assets.pinterest.com/js/pinit.js"]').remove(),(0,d.default)("body").prepend((0,d.default)('<script defer src="//assets.pinterest.com/js/pinit.js" data-pin-build="parsePinBtns"><\/script>')),e=setInterval(function(){i++,(l.default.isFunction(window.parsePinBtns)||i>n)&&(clearInterval(e),t())},100)};f.Pinterest=b.extend({embed_type:"pinterest",containerSelector:"a",resizable:!1,forceFrameSize:!0,containerSelectors:{buttonPin:"span",buttonFollow:"span",embedPin:"span",embedUser:"span",embedBoard:"span"},parse:function(t,e){let i=t.match(/data-pin-do=\"(\S+)\"/);return l.default.isArray(i)&&i[1]&&(this.pinterestType=i[1],this.containerSelector=this.containerSelectors[this.pinterestType]||this.containerSelector),e&&e(t.replace(/<script.*script>/i,""))},draw:function(t,e,i){c.initPinterest(function(){let n,r,o,a,m,s=0,u=100,g=20,h=50,p=!1,w;e.html(t),this.pinterestType||this.parse(t[0].outerHTML),this.pinterestType&&e.addClass(this.pinterestType),window.parsePinBtns(e.get(0)),m=setInterval(function(){if(s++,n=e.children(this.containerSelector).filter(function(){return/PIN_\d+/.test(this.className)}),r=n.height(),r||s>g){if(r||s>h){r&&RM.common.mode==="constructor"&&(o=n.outerWidth(!0),a=n.outerHeight(!0),this.pinterestType=="buttonFollow"&&(w=n.children("i"),w.length&&(o+=(w.outerWidth()||1)-1))),clearInterval(m),i(o,a);return}if(p)return;p=!0,i()}}.bind(this),u)}.bind(this))}});f.FacebookVideo=b.extend({embed_type:"fbvideo",containerSelector:"iframe",resizable:!0,proportional:!0,forceFrameSize:!0,initialize:function(){b.prototype.initialize.apply(this,arguments),this.block&&l.default.extend(this.block.frame,{minwidth:220,minheight:124})},parse:function(t,e){return e(t.replace(/<script.*script>/gi,"").replace(/<div\s+id=(\'|\")fb-root(\'|\")><\/div>/gi,""))},draw:function(t,e,i){let n,r,o;e.html(t),E.initFacebookAPI(function(){window.FB.XFBML.parse(e.get(0),function(){n=e.find(this.containerSelector),r=n.width(),o=n.height(),i(r,o)}.bind(this))}.bind(this))}});c.readymagEmbedCallbacks=[];c.initReadymag=function(t){if(RM.common.isReadymagEmbedInited&&l.default.isFunction(window.RM_EMBED_parse))return t();c.readymagEmbedCallbacks.push(t),window.RM_EMBED_initAsync=function(){RM.common.isReadymagEmbedInited=!0,l.default.each(c.readymagEmbedCallbacks,function(e){l.default.isFunction(e)&&e()}),c.readymagEmbedCallbacks=[]},!c.readymagInitXhr&&((0,d.default)('body > script[src~="RM_EMBED_"]').remove(),c.readymagInitXhr=d.default.ajax({url:_.EMBED_SCRIPT_MAIN,dataType:"script"}))};f.Readymag=b.extend({embed_type:"readymag",containerSelector:"iframe",resizable:!0,initialize:function(){b.prototype.initialize.apply(this,arguments),this.block&&this.block.frame&&l.default.extend(this.block.frame,{minwidth:288,minheight:236,maxwidth:512,maxheight:383})},parse:function(t,e){return e(t.replace(/<script.*script>/i,""))},draw:function(t,e,i){e.html(t),c.initReadymag(function(){window.RM_EMBED_parse(function(){let n=e.find(this.containerSelector),r=n.width(),o=n.height();i(r+2,o)}.bind(this))}.bind(this))}});f.IFrame=b.extend({embed_type:"simple-iframe",containerSelector:"iframe",resizable:!0,parse:function(t,e){let i,n=/[\s\S]*?(\<iframe[\s\S]*?\>)[\s\S]*?(\<\/iframe\>)[\s\S]*?/i;return i=t.match(n),i&&i[1]&&i[2]?e(i[1]+i[2]):e(null)},sanitize:function(t){let e=(0,d.default)(t);if(!(typeof e=="object"&&e.length))return e;let i=(0,d.default)("<iframe></iframe>"),n=e.get(0).attributes,r=["allowtransparency","allowfullscreen","height","name","sandbox","scrolling","seamless","src","width","allow"],o;return(0,l.default)(n).each(function(a){if(typeof a=="object"&&a.specified&&l.default.contains(r,a.name.toLowerCase())){let m=a.name.toLowerCase(),s=a.value;m=="src"&&window.location.protocol=="https:"&&(s=s.replace(/^http(s?):\/\//i,"//")),m==="sandbox"&&(o=s.split(" ")),i.attr(m,s)}}),this.isInViewer||R(i,o),i},draw:function(t,e,i){let n=t[0].src;if(!n||!n.trim()){i();return}if(RM.screenshot&&y.getVideoProvider(n)){this.setPosterInsteadOfVideo(n,e,i);return}e.html(t);let r,o,a,m,s,u=0,g=100,h=20,p=50,w=!1;s=setInterval(function(){if(u++,r=e.children(this.containerSelector),o=r.height(),o||u>h){if(o||u>p){o&&RM.common.mode==="constructor"&&(a=r.width(),m=r.height()),clearInterval(s),i(a,m);return}if(w)return;w=!0,i()}}.bind(this),g)},setPosterInsteadOfVideo:function(t,e,i){let n=y.getVideoProvider(t),r="",o=(0,d.default)("<img/>");y.getEmbedData(t,function(m){y.getHighResVideoThumbnail({provider:n,thumbnail_url:m.thumbnail_url}).then(l.default.bind(function(s){r=s,a(r)},this))},function(){typeof i=="function"&&i()});function a(m){o[0].src=m,e.css({"background-color":"#000"}),o.css({position:"absolute",top:0,bottom:0,margin:"auto",width:"100%",height:"auto"}),e.append(o)}}});f.CodeInjection=b.extend({embed_type:"code-injection",containerSelector:"rm-code-injection",resizable:!0,HEAD_PASSTHROUGH_SELECTOR:"",parse:function(t,e){return e(t)},sanitize:function(t){return d.default.parseHTML(t,document,!0)},draw:function(t,e,i){let n=(0,d.default)(document).find("head"),r="<head>",o='<body style="padding:0; margin: 0; width: 100%; height: 100%; min-width: initial; min-height: auto;">',a='<!DOCTYPE html><html style="width: 100%; height: 100%; min-width: initial; min-height: auto;">',m=n.find(this.HEAD_PASSTHROUGH_SELECTOR),s=(0,d.default)('<iframe seamless style="width: 100%; height: 100%;"></iframe>'),u=(0,d.default)("<div></div>");if(!this.isInViewer||this.block&&this.block.model.get("use_iframe")||this.widget&&this.widget.use_iframe){this.isInViewer||R(s),m.each(function(){r+=this.outerHTML}),r+='<script src="https://unpkg.com/jquery@3.0.0/dist/jquery.min.js"><\/script>',r+="</head>",u.html(t),o+=u[0].innerHTML+"</body>";let g=a+r+o+"</html>";return e.html(s),s[0].contentWindow.document.open(),s[0].contentWindow.document.write(g),s[0].contentWindow.document.close(),i(s.width(),s.height())}else t=(0,d.default)(t),u.html(t),u.find("script").each(function(){let h=this,p;h.src&&h.text&&(p=document.createElement("script"),p.text=h.text,h.text="",(0,d.default)(p).insertAfter((0,d.default)(h)))}),import("https://st-p.rmcdn1.net/9cce3f87/dist/c/c-OPSZDN4N.js").then(({default:h})=>{h(e,u[0].innerHTML,{done:function(){return i(null,null)}})}),e.css({"font-family":"initial","font-weight":"initial"})}});f.Ecommerce=f.CodeInjection.extend({embed_type:"ecommerce"});f.Gdpr=f.CodeInjection.extend({embed_type:"gdpr"});f.Video=f.CodeInjection.extend({embed_type:"html5-video"});X=c});export{X as a,H as b};
