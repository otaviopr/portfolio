import{a as n}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-VULSAQEG.js";import{a as p,b as I}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-2KHDYVPR.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-BG2TXWLB.js";import{a as C}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-CPXCEDJ3.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-GUYSQT7B.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-JWF5I3FT.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-2FT5B35A.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-C6IZKA6N.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-HVEBXILH.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-3QB67RPF.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-ENWH72UO.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-PSJNY7PY.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-TQ2RSGML.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-MRW5JQZG.js";import{a as d,b as M}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-K4VSFRL5.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-UCG3AKNF.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-OZ532VLC.js";import{d as m,g as S}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-6KCILI66.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-PQXZSBSN.js";import{q as c,r as v}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-F2WG7IMJ.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-P4V2U6T2.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-ADTYP7RM.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-IKE2YPEF.js";import{a as T}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-ME4YHRBD.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-WQNNHYKO.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-5X7HAN6B.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-CASEFXL4.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-H6QZSWF6.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-5JUCOOCR.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-QFIYWCJN.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-I4335JMS.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-QVA2PFS4.js";import{k as b}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-U3QKTGF2.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-QNOOLVZK.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-NQTRVOJ5.js";import{D as a,F as g}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-E5FEB57G.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-VB6TFWKV.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-5NZYHTT2.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-BMPTOLAX.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-LXGFOBLO.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-VROFLEW4.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-2YXWJ5TM.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-3UBV5GOE.js";import"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-PXOKTL46.js";import{d as l}from"https://st-p.rmcdn1.net/9cce3f87/dist/c/c-CDDSJHLM.js";var u=l(b());var h=l(T());S();I();C();M();v();g();var w=n.extend({triggerWidgets:[],initialize:function(e,s,t){this.model=new h.default.Model(e),this.isAllImagesLoaded=!1,n.prototype.initialize.apply(this,[e,s,t])},render:async function(){if(!this.basePath||!this.numberOfImages)return this;this.makeBox("widget-shots");let{renderReact:e}=await import("https://st-p.rmcdn1.net/9cce3f87/dist/c/c-BLZYV44C.js"),{Shots:s}=await import("https://st-p.rmcdn1.net/9cce3f87/dist/c/c-KWBLYTTZ.js");return this.stateModel=new h.default.Model(this.getCurrentState()),e({component:()=>a(m,{context:p,model:this.stateModel,children:a(s,{mode:window.RM.screenshot?"screenshoter":"viewer",onFirstRender:this.onFirstRender,onFirstFrameLoaded:this.widgetIsLoaded,onAllImagesLoaded:this.onAllImagesLoaded})}),domElement:this.el,model:this.model,onDestroy:()=>{let i=this.el;u.default.unmountComponentAtNode(i),i&&i.parentNode&&i.parentNode.removeChild(i)}}),this.checkLink(),this},getCurrentState:function(){return{pageScale:this.page.scale,pageContentTop:this.page.contentPosition.top,magContainerHeight:this.page.mag.getContainerSizeCached().height,widgetBoxTop:this.calcBoxStyle({calcBBox:!0}).dimensions.top}},getViewerType:function(){return this.page.mag&&this.page.mag.viewOpts&&this.page.mag.viewOpts.viewertype||"vertical"},onFirstRender:function(){if(this.rendered=!0,this._scheduleStart&&this.start(),this.playbackType==="scroll"){let e;this.isAbove()&&this.getViewerType()==="vertical"?e=this.page.mag.getScroll():e=this.page.getScroll(),this.handleScroll(e)}},handleScroll:function(e){this.rendered&&this.stateModel.set({...this.getCurrentState(),currentScrollOffset:e})},handlePointerMovement:function(e){if(!this.rendered)return;"touches"in e&&this.getViewerType()==="horizontal"&&this.hoverDirection==="horizontally"&&e.stopPropagation();let s="touches"in e?e.touches[0].clientX:e.clientX,t="touches"in e?e.touches[0].clientY:e.clientY,i=e.target;if(!i)return;let o=c.getDocumentBox(i),r=d.isCSSTransform()?1:this.page.scale,f=s/r-o.left,y=t/r-o.top;this.hoverDirection==="horizontally"?this.stateModel.set({hoverPercent:f/o.width}):this.hoverDirection==="vertically"&&this.stateModel.set({hoverPercent:y/o.height})},getTriggerWidgets:async function(){let e=[];for(let s of this.triggers){let t;try{t=await this.page.mag.getWidgetById(s,this.page)}catch{continue}t&&(t.rendered||await new Promise(i=>this.listenToOnce(t,"rendered",i)),e.push(t))}return e.length||e.push(this),e},async bindTriggers(e,s){this.triggerWidgets=await this.getTriggerWidgets(),this.triggerWidgets.forEach(t=>{if(t.el instanceof HTMLElement)for(let i of e)t.el.addEventListener(i,s)})},unbindTriggers(e,s){this.triggerWidgets.forEach(t=>{if(t.el instanceof HTMLElement)for(let i of e)t.el.removeEventListener(i,s)})},handleContext(e){e.preventDefault()},handlePointerHover(e){e.type==="touchstart"&&e.target.setAttribute("draggable","true"),(e.type==="touchend"||e.type==="touchcancel")&&e.target.removeAttribute("draggable"),this.stateModel.set({mouseIn:e.type==="mouseenter"||e.type==="touchstart"})},handleMouseHoverInitCursor(e){let s=e.target;if(s){let t=s.getBoundingClientRect(),i=e.pageX>=t.x&&e.pageX<=t.x+t.width,o=e.pageY>=t.y&&e.pageY<=t.y+t.height,r=i&&o;this.stateModel.set({mouseIn:r}),this.unbindTriggers(["mousemove"],this.handleMouseHoverInitCursor)}},handleClick(){this.stateModel.set({mouseIn:!this.stateModel.get("mouseIn")})},onAllImagesLoaded(){this.isAllImagesLoaded=!0,this.playbackType==="hover"?(this.bindTriggers(["mouseenter","mouseleave","touchstart","touchend","touchcancel"],this.handlePointerHover),Modernizr.ismobile&&this.bindTriggers(["contextmenu"],this.handleContext)):this.playbackType==="click"&&this.bindTriggers(["click"],this.handleClick).then(()=>{this.triggerWidgets.forEach(e=>{e.el instanceof HTMLElement&&e.el.classList.add("interactive")})})},start:function(...e){if(n.prototype.start.apply(this,e),!this.rendered){this._scheduleStart=!0;return}this.playbackType==="scroll"?this.isAbove()&&this.getViewerType()==="vertical"?this.listenTo(this.page.mag,"mag_scroll",this.handleScroll):this.listenTo(this.page,"page_scroll",this.handleScroll):(this.playbackType==="hover"&&this.pausable===void 0||this.playbackType==="mousemove")&&this.bindTriggers(["mousemove","touchmove"],this.handlePointerMovement),setTimeout(()=>{this.stateModel.set({isStarted:!0})},1),this.isAllImagesLoaded&&this.onAllImagesLoaded()},stop:function(...e){n.prototype.stop.apply(this,e),this.rendered&&(this.stopListening(),this.unbindTriggers(["mousemove","touchmove"],this.handlePointerMovement),this.unbindTriggers(["mouseenter","mouseleave","touchstart","touchend","touchcancel"],this.handlePointerHover),this.unbindTriggers(["contextmenu"],this.handleContext),this.unbindTriggers(["click"],this.handleClick),this.stateModel.set({isStarted:!1}))},destroy:function(...e){n.prototype.destroy.apply(this,e)}}),B=w;export{B as default};
